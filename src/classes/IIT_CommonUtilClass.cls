public with sharing class IIT_CommonUtilClass {
    public static map<string, string>  map_StateName_Code = new map<string, string>();
    public static map<String ,String> mapOfKeyValue = new map<String ,String>();
    public static HTTPResponse getRequest(String endpointURL,String setMethod ,String sJsonStrData,String appType){
        HTTP auth = new HTTP();
        HTTPRequest req = new HTTPRequest();
        req.setEndpoint(endpointURL);
        //Blob headerValue = Blob.valueOf('STX-02264' +':' +'$72AwrEt');
        Blob headerValue = Blob.valueOf(IIT_SpeedTaxConnector.gateway.invoiceit_s__Merchant_ID__c +':' +IIT_SpeedTaxConnector.gateway.invoiceit_s__Merchant_Reference__c);
        String authorizationHeader = 'Basic ' + EncodingUtil.base64Encode(headerValue);
        req.setHeader('Authorization', authorizationHeader);
        
        if(setMethod== 'GET'){
            System.debug('Get method ');
            req.setHeader('Content-Type', 'application/json');
            req.setHeader('Accept', 'application/json');
            req.setMethod('GET');            
        }else if(setMethod=='POST'){
            System.debug('Get method ');
            if(appType=='xml'){
                req.setHeader('Content-Type', 'application/xml');
                req.setHeader('Accept', 'application/xml');
                System.debug('XML IS method ');
            }else{
                req.setHeader('Content-Type', 'application/json');
                req.setHeader('Accept', 'application/json');    
                System.debug('JSON IS method ');        
            }            
            req.setMethod('POST'); 
            req.setBody(sJsonStrData);       
        }        
        System.debug('request is --->'+req);
        req.setTimeout(120000);
       //String s = '{"PostInvoiceResult":{"ResultType":"SUCCESS","LineItemBundles":{"LineItemBundle":{"AddressForTax":{"Address1":"TEST","Address2":"","City":"ANNAPOLIS","State":"MD","Zip":21401,"Country":"USA","FullFipsCode":2400301600,"Latitude":38.982171,"Longitude":-76.527473},"AddressResolution":"FULL","LineItems":{"LineItem":[{"LineItemNumber":0,"CustomReference":"","ProductCode":"2016 ATX Total Tax Office Package","Quantity":1,"UnitPrice":{"Cents":38,"CentsWithPrecision":"38.000","DecimalValue":457.38,"DecimalValueWithPrecision":"457.38000","Dollars":457,"Negative":false},"SalesAmount":{"Cents":38,"CentsWithPrecision":"38.000","DecimalValue":457.38,"DecimalValueWithPrecision":"457.38000","Dollars":457,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":38,"CentsWithPrecision":"38.000","DecimalValue":457.38,"DecimalValueWithPrecision":"457.38000","Dollars":457,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":44,"CentsWithPrecision":"44.280","DecimalValue":27.44,"DecimalValueWithPrecision":"27.44280","Dollars":27,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":44,"CentsWithPrecision":"44.280","DecimalValue":27.44,"DecimalValueWithPrecision":"27.44280","Dollars":27,"Negative":false}}}},{"LineItemNumber":1,"CustomReference":"","ProductCode":"2016 ATX Deferred Payment Fee","Quantity":1,"UnitPrice":{"Cents":50,"CentsWithPrecision":"50.000","DecimalValue":27.5,"DecimalValueWithPrecision":"27.50000","Dollars":27,"Negative":false},"SalesAmount":{"Cents":50,"CentsWithPrecision":"50.000","DecimalValue":27.5,"DecimalValueWithPrecision":"27.50000","Dollars":27,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":50,"CentsWithPrecision":"50.000","DecimalValue":27.5,"DecimalValueWithPrecision":"27.50000","Dollars":27,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":65,"CentsWithPrecision":"65.000","DecimalValue":1.65,"DecimalValueWithPrecision":"1.65000","Dollars":1,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":65,"CentsWithPrecision":"65.000","DecimalValue":1.65,"DecimalValueWithPrecision":"1.65000","Dollars":1,"Negative":false}}}},{"LineItemNumber":2,"CustomReference":"","ProductCode":"2016 ATX Standard Processing - Total Tax Office Package","Quantity":1,"UnitPrice":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":108.9,"DecimalValueWithPrecision":"108.90000","Dollars":108,"Negative":false},"SalesAmount":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":108.9,"DecimalValueWithPrecision":"108.90000","Dollars":108,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":108.9,"DecimalValueWithPrecision":"108.90000","Dollars":108,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":53,"CentsWithPrecision":"53.400","DecimalValue":6.53,"DecimalValueWithPrecision":"6.53400","Dollars":6,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":53,"CentsWithPrecision":"53.400","DecimalValue":6.53,"DecimalValueWithPrecision":"6.53400","Dollars":6,"Negative":false}}}},{"LineItemNumber":3,"CustomReference":"","ProductCode":"2016 ATX Business States (All)","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":4,"CustomReference":"","ProductCode":"2016 ATX 1040 Package","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":5,"CustomReference":"","ProductCode":"EFile Fee","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":6,"CustomReference":"","ProductCode":"2016 ATX Standard Processing - 1040 package","Quantity":1,"UnitPrice":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":42.9,"DecimalValueWithPrecision":"42.90000","Dollars":42,"Negative":false},"SalesAmount":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":42.9,"DecimalValueWithPrecision":"42.90000","Dollars":42,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":42.9,"DecimalValueWithPrecision":"42.90000","Dollars":42,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":57,"CentsWithPrecision":"57.400","DecimalValue":2.57,"DecimalValueWithPrecision":"2.57400","Dollars":2,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":57,"CentsWithPrecision":"57.400","DecimalValue":2.57,"DecimalValueWithPrecision":"2.57400","Dollars":2,"Negative":false}}}},{"LineItemNumber":7,"CustomReference":"","ProductCode":"2016 ATX Federal 1040","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":8,"CustomReference":"","ProductCode":"2016 ATX User Guide PDF","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":9,"CustomReference":"","ProductCode":"2016 ATX 1040 State (1-3 States)","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":10,"CustomReference":"","ProductCode":"2016 2 (Two) Concurrent User Licenses","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":11,"CustomReference":"","ProductCode":"2016 ATX PaperlessPLUS","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":12,"CustomReference":"","ProductCode":"2016 ATX Tax Season Essentials CD","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":13,"CustomReference":"","ProductCode":"2016 ATX 1040 State (All States)","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":14,"CustomReference":"","ProductCode":"2016 ATX Federal Business and Specialty","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":15,"CustomReference":"","ProductCode":"2016 ATX Tax Prep Partner Standard Bundle","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":16,"CustomReference":"","ProductCode":"2016 Unlimited Efiling","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":17,"CustomReference":"","ProductCode":"2016 ATX-Tax Prep Partner 1041","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":18,"CustomReference":"","ProductCode":"2016 Payroll Compliance Reporting","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":19,"CustomReference":"","ProductCode":"2016 US Master Tax Guide Online","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":20,"CustomReference":"","ProductCode":"2016 ATX User Guide PDF","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":21,"CustomReference":"","ProductCode":"2016 US Master Tax Guide Book","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":22,"CustomReference":"","ProductCode":"2016 Complete Tax Library","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":23,"CustomReference":"","ProductCode":"2016 5 (Five) Concurrent User Licenses","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":24,"CustomReference":"","ProductCode":"2016 Practical Tax Bulletin","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":25,"CustomReference":"","ProductCode":"2016 Practical Tax Expert","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}}]},"RecalculatedJurisdictions":true,"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TotalTax":{"Cents":40,"CentsWithPrecision":"40.080","DecimalValue":51.4,"DecimalValueWithPrecision":"51.40080","Dollars":51,"Negative":false}}}}},"TotalExemptSales":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TotalSales":{"Cents":68,"CentsWithPrecision":"68.000","DecimalValue":856.68,"DecimalValueWithPrecision":"856.68000","Dollars":856,"Negative":false},"TotalTax":{"Cents":40,"CentsWithPrecision":"40.080","DecimalValue":51.4,"DecimalValueWithPrecision":"51.40080","Dollars":51,"Negative":false},"Transactions":{"Dates":"2016-02-26T00:00:00-08:00","InvoiceNumber":"INV-0710","TransactionsID":120501653}}}';

        //HttpResponse httpe = (HttpResponse)s;
       //if(Test.isRunningTest()){
        //return httpe; 
        //}else{
            return auth.send(req);
        //}
        
    }
     public static String getObjectFields(String objectName) {
        String sQuery = '';
        String sCompareAddress = '';
        Map<String, Schema.SObjectField> objectFieldMap = Schema.getGlobalDescribe().get(objectName).getDescribe().fields.getMap();
        for(Schema.SObjectField column: objectFieldMap.values()) {
            sQuery += column+', ';
        }
        sQuery = sQuery.substring(0, sQuery.length()-2);
        sQuery += ' ';
        return sQuery;
    }
     public static String getDetails(Id sRecordId , string statusIn){
        String sJsonStrData;
        string sInvoiceDetailsQurey = ' SELECT invoiceit_s__Account__r.ShippingCity,invoiceit_s__Account__r.ShippingStreet,invoiceit_s__Account__r.ShippingState,invoiceit_s__Account__r.ShippingPostalCode,invoiceit_s__Account__r.ShippingCountry,invoiceit_s__Account__r.Tax_Exempt__c,invoiceit_s__Account__r.Customer_Account_Number__c,invoiceit_s__Account__r.Name,invoiceit_s__Shipping_Contact__r.Name,invoiceit_s__Shipping_Contact__r.MailingStreet,invoiceit_s__Billing_Contact__r.MailingStreet,invoiceit_s__Billing_Contact__r.MailingCity,invoiceit_s__Billing_Contact__r.MailingPostalCode,invoiceit_s__Billing_Contact__r.MailingCountry,invoiceit_s__Billing_Contact__r.MailingState,invoiceit_s__Shipping_Contact__r.MailingPostalCode,invoiceit_s__Shipping_Contact__r.MailingState,invoiceit_s__Shipping_Contact__r.MailingCountry,invoiceit_s__Shipping_Contact__r.MailingCity,invoiceit_s__CurrencyL__r.Name, ' + getObjectFields('invoiceit_s__Invoice__c')
        + ', (Select invoiceit_s__Job_Rate_Plan_Charge__r.invoiceit_s__Job_Rate_Plan__r.invoiceit_s__Job_Product__r.QTC__Description1__c ,' + getObjectFields('invoiceit_s__Invoice_Lines__c') + ' From invoiceit_s__Invoice_Lines__r WHERE invoiceit_s__Product_Name__c !=\'Sales Tax\' )'
        + ' FROM invoiceit_s__Invoice__c '
        + ' WHERE Id =: sRecordId';

        list<invoiceit_s__Invoice__c> listOfInvoices = Database.query(sInvoiceDetailsQurey);
        
        string sQuoteDetailsQurey = ' SELECT SBQQ__Account__r.Name,SBQQ__Account__r.Customer_Account_Number__c,SBQQ__Account__r.Tax_Exempt__c,SBQQ__Account__r.Credit_on_Account__c, ' + getObjectFields('SBQQ__Quote__c')
        + ', (Select ' + getObjectFields('SBQQ__QuoteLine__c') + ',SBQQ__Product__r.Name From SBQQ__LineItems__r WHERE SBQQ__Product__r.Name !=\'Sales Tax\')'
        + ' FROM SBQQ__Quote__c '
        + ' WHERE Id =: sRecordId';

        list<SBQQ__Quote__c> listOfQuotes = Database.query(sQuoteDetailsQurey);
        
        if(!listOfInvoices.isEmpty()) {         
            sJsonStrData= IIT_JSonParserClass.jsonStringForGetInvoice(listOfInvoices,statusIn);
        }
        else if(!listOfQuotes.isEmpty()){
            sJsonStrData= IIT_JSonParserClass.jsonStringForGetQuote(listOfQuotes);
        }  
        system.debug('***********'+sJsonStrData);
        return sJsonStrData;
    } 
    public static String postInvoic(Id sRecordId){
        invoiceit_s__Invoice__c invoice = [SELECT Id,Name FROM invoiceit_s__Invoice__c WHERE Id =: sRecordId];
        System.debug('Post Invoice '+IIT_SpeedTaxConnector.gateway.invoiceit_s__Merchant_ID__c);
        String doDirectRequest = '<?xml version="1.0" standalone="yes"?>'+
         '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tran="http://speedtax.com/transaction" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/03/addressing" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">'+
          '<soap:Header>' +
            '<wsse:Security soap:mustUnderstand="1">' +
             '<wsse:UsernameToken>' +
                '<wsse:Username>'+IIT_SpeedTaxConnector.gateway.invoiceit_s__Merchant_ID__c+'</wsse:Username>' +
                '<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">'+IIT_SpeedTaxConnector.gateway.invoiceit_s__Merchant_Reference__c+'</wsse:Password>' +
              '</wsse:UsernameToken>' +
            '</wsse:Security>' +
          '</soap:Header>' +
          '<soapenv:Body>' +
            '<tran:postInvoices>' +
              '<CompanyId>'+IIT_SpeedTaxConnector.gateway.invoiceit_s__Security_Key__c+'</CompanyId>' +
              '<InvoiceNumbers>'+invoice.Name+'</InvoiceNumbers>' +
            '</tran:postInvoices>' +
          '</soapenv:Body>' +
        '</soapenv:Envelope>' ;
        System.debug('PostInvoice is 176-->'+doDirectRequest);
        return doDirectRequest;
    }

    /*public static String voidInvoiceId(Id sRecordId){
        invoiceit_s__Invoice__c invoice = [SELECT Id,Name FROM invoiceit_s__Invoice__c WHERE Id =: sRecordId]; 
        String doDirectRequest = '<?xml version="1.0" standalone="yes"?>'+
            '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tran="http://speedtax.com/transaction" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/03/addressing" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">'+
   
           '<soap:Header>' +
                   '<wsse:Security soap:mustUnderstand="1">' +
                    '<wsse:UsernameToken>' +
                       '<wsse:Username>STX-02264</wsse:Username>' +
                       '<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">$72AwrEt</wsse:Password>' +
                     '</wsse:UsernameToken>' +
                   '</wsse:Security>' +
                 '</soap:Header>'+
           '<soapenv:Body>' +
              '<tran:VoidInvoice>' +
                 '<tran:VoidInvoiceRequest>'+
                    '<tran:EntityID>STX-02264-DEMO</tran:EntityID>'+
                    '<tran:InvoiceNumber>'+invoice.Name+'</tran:InvoiceNumber>'+
                 '</tran:VoidInvoiceRequest>'+
              '</tran:VoidInvoice>'+
           '</soapenv:Body>'+
        '</soapenv:Envelope>';  

        return doDirectRequest;
    }*/
    public static map<String ,String> getElements(DOM.XMLNode node) 
    {
        
        system.debug('node=='+ node);
      if(node.getNodeType() == DOM.XMLNodeType.ELEMENT) {
        System.debug('node name & text is ' + node.getName() + '::' + node.getText());
        if(node.getText().trim() != '') {
            mapOfKeyValue.put(node.getName(), node.getText().trim());
        }

        for(Dom.XMLNode child : node.getChildElements()) {
            getElements(child);
        }
      }
      system.debug('mapOfKeyValue'+ mapOfKeyValue);
      return mapOfKeyValue;
    }
        
}