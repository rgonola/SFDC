global class RepostInvoiceTax
{

    public static String requestCall;
    public static String appType;
    public static invoiceit_s__Gateway__c gateway;
    
@Future(callout=true)  
   public static Void Repost(string Id , String status){
    
      gateway = [SELECT invoiceit_s__Merchant_ID__c,invoiceit_s__Merchant_Reference__c,invoiceit_s__Merchant_Seal_User_Id__c,invoiceit_s__Security_Key__c,Name FROM invoiceit_s__Gateway__c WHERE Name = 'Speed Tax'];
        
    
         //invoiceit_s__Invoice__c inv = [SELECT invoiceit_s__Shipping_Contact__c FROM invoiceit_s__Invoice__c WHERE Id =: Id];
          wrapperclass wrapReslut = postTax(Id,status);
          
          map<string,decimal> map_Pcode_Taxamt = new map<string,decimal>();
          
          
          map_Pcode_Taxamt  = wrapReslut.map_Pcode_Taxamt;
          
          
          String postTaxTID = wrapReslut.sresponse;
         System.debug('postTaxTID--->147'+wrapReslut.sresponse);
         requestCall='POST';
         appType= 'json';
         String  doDirectRequest = postInvoic(Id);
        string endpointurl='https://service.myspeedtax.com/tx/services/STxTransactionService';       
        try{
            HTTPResponse authresp;
            if(!Test.isRunningTest())
                authresp = getRequest(endpointurl,requestCall,doDirectRequest,appType);
                
            if(Test.isRunningTest() || authresp.getStatusCode() == 200){ 
                
                String[] str;
               if(!Test.isRunningTest()){
                system.debug('sJsonStrDataToreturn ***--->' + authresp.getBody());
                system.debug('sJsonStrDataToreturn ***--->' + authresp.getBody()); 
                 str= postTaxTID.split(':') ;
                System.debug('Line number is -->157'+str.get(0)+'--'+str.get(1)+'---');
                }
                
                invoiceit_s__Invoice__c invoice ; 
                if(status=='Posted' || status == 'Draft'){
                    invoice = new invoiceit_s__Invoice__c(Id=Id, ST_Transaction_Id__c=str.get(0),Speed_TAX__c=Decimal.valueOf(str.get(1)));
                 
                }else{
                    invoice = new invoiceit_s__Invoice__c(Id=Id, Cancel_Transaction_Id__c=str.get(0),Cancel_Tax__c=Decimal.valueOf(str.get(1)));
                 
                }
                 
                 upsert invoice;    
                 invoiceit_s__Invoice__c invQuery = [SELECT Id,invoiceit_s__Order__c,invoiceit_s__Invoice_Date__c FROM invoiceit_s__Invoice__c WHERE Id =: invoice.id];
                 
                 System.debug('order on the invoice ===>'+invQuery.invoiceit_s__Order__c);
                 list<invoiceit_s__Invoice_Lines__c> listofInvoiceLine = [SELECT Id, invoiceit_s__Product_Name__c,Product_Code__c FROM invoiceit_s__Invoice_Lines__c WHERE invoiceit_s__Invoice__c =: Id AND invoiceit_s__Product_Name__c != null];
                 System.debug('-------->'+listofInvoiceLine );
                 map<String, invoiceit_s__Invoice_Lines__c> mapofInvoiceLine = new map<String, invoiceit_s__Invoice_Lines__c>();
                for(invoiceit_s__Invoice_Lines__c invLine : listofInvoiceLine) {
                    mapofInvoiceLine.put(invLine.Product_Code__c, invLine);
                }
                if(status!='Cancelled'){
                    list<invoiceit_s__Invoice_Lines__c> listofInvoiceLineToUpdate = new list<invoiceit_s__Invoice_Lines__c>();
                
                    if(mapofInvoiceLine.containskey('Tax')){
                       listofInvoiceLineToUpdate.add(new invoiceit_s__Invoice_Lines__c(Id = mapofInvoiceLine.get(string.valueof('Tax')).Id,invoiceit_s__Line_Amount__c = Decimal.valueOf(str.get(1)) ,invoiceit_s__Unit_Price__c = Decimal.valueOf(str.get(1))));
                    }else {
                       list<invoiceit_s__Job_Rate_Plan_Charge__c> orpc = [SELECT Id,invoiceit_s__Order__c,Product_Code__c,Product_Name__c FROM invoiceit_s__Job_Rate_Plan_Charge__c WHERE Product_Name__c = 'Sales Tax' AND invoiceit_s__Order__c =:invQuery.invoiceit_s__Order__c]; 
                       invoiceit_s__Invoice_Lines__c invoiceline  = new invoiceit_s__Invoice_Lines__c(invoiceit_s__Job_Rate_Plan_Charge__c =  orpc[0].id, invoiceit_s__Sequence_No__c = 999 ,invoiceit_s__Service_Start_Date__c = invQuery.invoiceit_s__Invoice_Date__c ,invoiceit_s__Service_End_Date__c = invQuery.invoiceit_s__Invoice_Date__c ,invoiceit_s__Quantity__c = 1,invoiceit_s__Job__c =invQuery.invoiceit_s__Order__c ,invoiceit_s__Invoice__c = invQuery.id,invoiceit_s__Product_Name__c = 'Sales Tax',invoiceit_s__Line_Amount__c = Decimal.valueOf(str.get(1)) ,invoiceit_s__Unit_Price__c = Decimal.valueOf(str.get(1)));
                       insert invoiceline;
                    }
                    for(String producCode  : map_Pcode_Taxamt.keySet()){
                        if(mapofInvoiceLine.containskey(producCode)){
                            listofInvoiceLineToUpdate.add(new invoiceit_s__Invoice_Lines__c(Id = mapofInvoiceLine.get(producCode).Id, Tax_New__c = map_Pcode_Taxamt.get(producCode)));
                        }
                    }
                    
                    System.debug('List Of Invoice Line updated BEFORE ');    
                    update listofInvoiceLineToUpdate;
                    System.debug('List Of Invoice Line updated AFTER ');

                }
                
            }
            else{                
                system.debug('Error--->' + authresp + authresp.getBody());
            }    
         }catch(exception ex){
                     
         }
        
        
     




  }
  
   //It will create the record in the speed tax as a pending status and return the transaction ID and tax
     webservice static wrapperclass postTax(string Id,string status){
         gateway = [SELECT invoiceit_s__Merchant_ID__c,invoiceit_s__Merchant_Reference__c,invoiceit_s__Merchant_Seal_User_Id__c,invoiceit_s__Security_Key__c,Name FROM invoiceit_s__Gateway__c WHERE Name = 'Speed Tax'];
        wrapperclass wrapperResult = new wrapperclass();
        String sJsonStrDataToreturn = '';
        appType = 'json';
        requestCall = 'POST';
        string sReturnValue = '';
        //String sJsonStrData ;
        Map<string,decimal> map_Pcode_Taxamt = new Map<string,decimal>();
        String sJsonStrData = IIT_CommonUtilClass.getDetails(Id,status);        
        if(sJsonStrData.contains('ERROR') && !Test.isRunningTest()){
           wrapperResult.sresponse = sJsonStrData;
           return wrapperResult;
        }
        system.debug('sJsonStrData--->' + sJsonStrData);
        HTTP auth = new HTTP();
        HTTPRequest req = new HTTPRequest();
        
        string endpointurl='https://service.myspeedtax.com/tx2/services/rest/entity/'+gateway.invoiceit_s__Security_Key__c+'/invoice/post';        
        try{
            HTTPResponse authresp;
            
            if(!Test.isRunningTest())
            authresp = getRequest(endpointurl,requestCall,sJsonStrData,appType);

            if(Test.isRunningTest() || authresp.getStatusCode() == 200){   
               //sJsonStrDataToreturn =  IIT_JSonParserClass.parseResponseBodyPost(authresp.getBody(),Id); 
               //System.debug('sJsonStrDataToreturnsJsonStrDataToreturn--168>'+sJsonStrDataToreturn);
               string sReplace;
               if(!Test.isRunningTest()) {
                sReplace = authresp.getBody().replaceAll('ns2.','');
        sReplace = sReplace.replaceAll('ns1.','');
               } else {
                sReplace = '{"PostInvoiceResult":{"ResultType":"SUCCESS","LineItemBundles":{"LineItemBundle":{"AddressForTax":{"Address1":"TEST","Address2":"","City":"ANNAPOLIS","State":"MD","Zip":21401,"Country":"USA","FullFipsCode":2400301600,"Latitude":38.982171,"Longitude":-76.527473},"AddressResolution":"FULL","LineItems":{"LineItem":[{"LineItemNumber":0,"CustomReference":"","ProductCode":"2016 ATX Total Tax Office Package","Quantity":1,"UnitPrice":{"Cents":38,"CentsWithPrecision":"38.000","DecimalValue":457.38,"DecimalValueWithPrecision":"457.38000","Dollars":457,"Negative":false},"SalesAmount":{"Cents":38,"CentsWithPrecision":"38.000","DecimalValue":457.38,"DecimalValueWithPrecision":"457.38000","Dollars":457,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":38,"CentsWithPrecision":"38.000","DecimalValue":457.38,"DecimalValueWithPrecision":"457.38000","Dollars":457,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":44,"CentsWithPrecision":"44.280","DecimalValue":27.44,"DecimalValueWithPrecision":"27.44280","Dollars":27,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":44,"CentsWithPrecision":"44.280","DecimalValue":27.44,"DecimalValueWithPrecision":"27.44280","Dollars":27,"Negative":false}}}},{"LineItemNumber":1,"CustomReference":"","ProductCode":"2016 ATX Deferred Payment Fee","Quantity":1,"UnitPrice":{"Cents":50,"CentsWithPrecision":"50.000","DecimalValue":27.5,"DecimalValueWithPrecision":"27.50000","Dollars":27,"Negative":false},"SalesAmount":{"Cents":50,"CentsWithPrecision":"50.000","DecimalValue":27.5,"DecimalValueWithPrecision":"27.50000","Dollars":27,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":50,"CentsWithPrecision":"50.000","DecimalValue":27.5,"DecimalValueWithPrecision":"27.50000","Dollars":27,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":65,"CentsWithPrecision":"65.000","DecimalValue":1.65,"DecimalValueWithPrecision":"1.65000","Dollars":1,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":65,"CentsWithPrecision":"65.000","DecimalValue":1.65,"DecimalValueWithPrecision":"1.65000","Dollars":1,"Negative":false}}}},{"LineItemNumber":2,"CustomReference":"","ProductCode":"2016 ATX Standard Processing - Total Tax Office Package","Quantity":1,"UnitPrice":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":108.9,"DecimalValueWithPrecision":"108.90000","Dollars":108,"Negative":false},"SalesAmount":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":108.9,"DecimalValueWithPrecision":"108.90000","Dollars":108,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":108.9,"DecimalValueWithPrecision":"108.90000","Dollars":108,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":53,"CentsWithPrecision":"53.400","DecimalValue":6.53,"DecimalValueWithPrecision":"6.53400","Dollars":6,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":53,"CentsWithPrecision":"53.400","DecimalValue":6.53,"DecimalValueWithPrecision":"6.53400","Dollars":6,"Negative":false}}}},{"LineItemNumber":3,"CustomReference":"","ProductCode":"2016 ATX Business States (All)","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":4,"CustomReference":"","ProductCode":"2016 ATX 1040 Package","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":5,"CustomReference":"","ProductCode":"EFile Fee","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":6,"CustomReference":"","ProductCode":"2016 ATX Standard Processing - 1040 package","Quantity":1,"UnitPrice":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":42.9,"DecimalValueWithPrecision":"42.90000","Dollars":42,"Negative":false},"SalesAmount":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":42.9,"DecimalValueWithPrecision":"42.90000","Dollars":42,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":42.9,"DecimalValueWithPrecision":"42.90000","Dollars":42,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":57,"CentsWithPrecision":"57.400","DecimalValue":2.57,"DecimalValueWithPrecision":"2.57400","Dollars":2,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":57,"CentsWithPrecision":"57.400","DecimalValue":2.57,"DecimalValueWithPrecision":"2.57400","Dollars":2,"Negative":false}}}},{"LineItemNumber":7,"CustomReference":"","ProductCode":"2016 ATX Federal 1040","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":8,"CustomReference":"","ProductCode":"2016 ATX User Guide PDF","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":9,"CustomReference":"","ProductCode":"2016 ATX 1040 State (1-3 States)","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":10,"CustomReference":"","ProductCode":"2016 2 (Two) Concurrent User Licenses","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":11,"CustomReference":"","ProductCode":"2016 ATX PaperlessPLUS","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":12,"CustomReference":"","ProductCode":"2016 ATX Tax Season Essentials CD","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":13,"CustomReference":"","ProductCode":"2016 ATX 1040 State (All States)","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":14,"CustomReference":"","ProductCode":"2016 ATX Federal Business and Specialty","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":15,"CustomReference":"","ProductCode":"2016 ATX Tax Prep Partner Standard Bundle","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":16,"CustomReference":"","ProductCode":"2016 Unlimited Efiling","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":17,"CustomReference":"","ProductCode":"2016 ATX-Tax Prep Partner 1041","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":18,"CustomReference":"","ProductCode":"2016 Payroll Compliance Reporting","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":19,"CustomReference":"","ProductCode":"2016 US Master Tax Guide Online","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":20,"CustomReference":"","ProductCode":"2016 ATX User Guide PDF","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":21,"CustomReference":"","ProductCode":"2016 US Master Tax Guide Book","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":22,"CustomReference":"","ProductCode":"2016 Complete Tax Library","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":23,"CustomReference":"","ProductCode":"2016 5 (Five) Concurrent User Licenses","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":24,"CustomReference":"","ProductCode":"2016 Practical Tax Bulletin","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":25,"CustomReference":"","ProductCode":"2016 Practical Tax Expert","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}}]},"RecalculatedJurisdictions":true,"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TotalTax":{"Cents":40,"CentsWithPrecision":"40.080","DecimalValue":51.4,"DecimalValueWithPrecision":"51.40080","Dollars":51,"Negative":false}}}}},"TotalExemptSales":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TotalSales":{"Cents":68,"CentsWithPrecision":"68.000","DecimalValue":856.68,"DecimalValueWithPrecision":"856.68000","Dollars":856,"Negative":false},"TotalTax":{"Cents":40,"CentsWithPrecision":"40.080","DecimalValue":51.4,"DecimalValueWithPrecision":"51.40080","Dollars":51,"Negative":false},"Transactions":{"Dates":"2016-02-26T00:00:00-08:00","InvoiceNumber":"INV-0710","TransactionsID":120501653}}}';
               }
                //new code for populate tax at invoice line 
                map<String, Object> mapOfInvoice = (map<String,Object>) JSON.deserializeUntyped(sReplace);
                map<String, Object> mapOfInvoiceValue = (map<String,Object>) mapOfInvoice.get('PostInvoiceResult');
                map<String, Object> invMapAmount = (map<String,Object>) mapOfInvoice.get('Transactions');
                string sIsValid = string.ValueOf(mapOfInvoiceValue.get('ResultType'));
                if(sIsValid =='SUCCESS'){

                    map<String, Object> mapOfInvoiceLineItemBundles = (map<String,Object>) mapOfInvoiceValue.get('LineItemBundles');

                    map<String, Object> mapOfInvoiceLineItemBundle = (map<String,Object>) mapOfInvoiceLineItemBundles.get('LineItemBundle');

                    //Total tax on the invoice 
                    map<String, Object> mapOfInvoiceTaxValue = (map<String,Object>) mapOfInvoiceValue.get('TotalTax');
                    map<String, Object> mapOfTransactionIdValue = (map<String,Object>) mapOfInvoiceValue.get('Transaction');
                    string sTransactionId = string.ValueOf(mapOfTransactionIdValue.get('TransactionID'));
                    sReturnValue +=sTransactionId+':';      
                    sReturnValue += string.ValueOf(mapOfInvoiceTaxValue.get('DecimalValue'));
                    System.debug('Line number is 36'+sReturnValue);
                    sJsonStrDataToreturn =sReturnValue ;
                    map<String, Object> mapOfInvoiceLineItems = (map<String,Object>) mapOfInvoiceLineItemBundle.get('LineItems');

                    System.debug('List values '+mapOfInvoiceLineItemBundle.get('LineItems'));
                    System.debug('mapOfInvoiceLineItemBundles Newewew==>>'+mapOfInvoiceLineItems);
                    
                    map<String, Object> mapOfLineItems;
                    List<Object> lstobject = new List<Object>();
                    
                    System.debug('mapOfInvoiceLineItemBundles size is==>>'+mapOfInvoiceLineItems.size());
                    if( sReplace.countMatches('LineItemNumber') != 1) {
                       lstobject = (List<Object>)mapOfInvoiceLineItems.get('LineItem');
                   
                    } else {
                        mapOfLineItems = (map<String,Object>) mapOfInvoiceLineItems.get('LineItem');
                         System.debug('mapOfLineItems  value is==>>'+mapOfLineItems);
                       lstobject = mapOfInvoiceLineItems.values();
                    
                    }
                    
                  for(Object s : lstobject ){
                        // single object map
                        Map<String, Object> lineItemamp = (Map<String, Object>)s;
                        Map<String, Object> taxAmtMap = (Map<String, Object>)lineItemamp.get('TaxAmount');
                        map_Pcode_Taxamt.put((string)lineItemamp.get('ProductCode') ,(decimal)taxAmtMap.get('DecimalValue'));
                    }
                        
                    
                    
                     
                    
                }
               // system.debug('map_Pcode_Taxamt==>>'+map_Pcode_Taxamt);    
               wrapperResult.sresponse = sJsonStrDataToreturn ;
               wrapperResult.map_Pcode_Taxamt= map_Pcode_Taxamt;
               
            }
            else{
                wrapperResult.sresponse = authresp.getBody();
                
            }    
        }catch(exception ex){
             wrapperResult.sresponse = ex.getMessage() + ex.getLineNumber();
             return  wrapperResult ;  
        }
        System.debug('114 Line number'+sJsonStrDataToreturn);
         return wrapperResult;
     }
     
      public static HTTPResponse getRequest(String endpointURL,String setMethod ,String sJsonStrData,String appType1){
        HTTP auth = new HTTP();
        HTTPRequest req = new HTTPRequest();
        req.setEndpoint(endpointURL);
        //Blob headerValue = Blob.valueOf('STX-02264' +':' +'$72AwrEt');
        Blob headerValue = Blob.valueOf(gateway.invoiceit_s__Merchant_ID__c +':' +gateway.invoiceit_s__Merchant_Reference__c);
        String authorizationHeader = 'Basic ' + EncodingUtil.base64Encode(headerValue);
        req.setHeader('Authorization', authorizationHeader);
        
        if(setMethod== 'GET'){
            System.debug('Get method ');
            req.setHeader('Content-Type', 'application/json');
            req.setHeader('Accept', 'application/json');
            req.setMethod('GET');            
        }else if(setMethod=='POST'){
            System.debug('Get method ');
            if(appType1=='xml'){
                req.setHeader('Content-Type', 'application/xml');
                req.setHeader('Accept', 'application/xml');
                System.debug('XML IS method ');
            }else{
                req.setHeader('Content-Type', 'application/json');
                req.setHeader('Accept', 'application/json');    
                System.debug('JSON IS method ');        
            }            
            req.setMethod('POST'); 
            req.setBody(sJsonStrData);       
        }        
        System.debug('request is --->'+req);
        req.setTimeout(120000);
       //String s = '{"PostInvoiceResult":{"ResultType":"SUCCESS","LineItemBundles":{"LineItemBundle":{"AddressForTax":{"Address1":"TEST","Address2":"","City":"ANNAPOLIS","State":"MD","Zip":21401,"Country":"USA","FullFipsCode":2400301600,"Latitude":38.982171,"Longitude":-76.527473},"AddressResolution":"FULL","LineItems":{"LineItem":[{"LineItemNumber":0,"CustomReference":"","ProductCode":"2016 ATX Total Tax Office Package","Quantity":1,"UnitPrice":{"Cents":38,"CentsWithPrecision":"38.000","DecimalValue":457.38,"DecimalValueWithPrecision":"457.38000","Dollars":457,"Negative":false},"SalesAmount":{"Cents":38,"CentsWithPrecision":"38.000","DecimalValue":457.38,"DecimalValueWithPrecision":"457.38000","Dollars":457,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":38,"CentsWithPrecision":"38.000","DecimalValue":457.38,"DecimalValueWithPrecision":"457.38000","Dollars":457,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":44,"CentsWithPrecision":"44.280","DecimalValue":27.44,"DecimalValueWithPrecision":"27.44280","Dollars":27,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":44,"CentsWithPrecision":"44.280","DecimalValue":27.44,"DecimalValueWithPrecision":"27.44280","Dollars":27,"Negative":false}}}},{"LineItemNumber":1,"CustomReference":"","ProductCode":"2016 ATX Deferred Payment Fee","Quantity":1,"UnitPrice":{"Cents":50,"CentsWithPrecision":"50.000","DecimalValue":27.5,"DecimalValueWithPrecision":"27.50000","Dollars":27,"Negative":false},"SalesAmount":{"Cents":50,"CentsWithPrecision":"50.000","DecimalValue":27.5,"DecimalValueWithPrecision":"27.50000","Dollars":27,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":50,"CentsWithPrecision":"50.000","DecimalValue":27.5,"DecimalValueWithPrecision":"27.50000","Dollars":27,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":65,"CentsWithPrecision":"65.000","DecimalValue":1.65,"DecimalValueWithPrecision":"1.65000","Dollars":1,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":65,"CentsWithPrecision":"65.000","DecimalValue":1.65,"DecimalValueWithPrecision":"1.65000","Dollars":1,"Negative":false}}}},{"LineItemNumber":2,"CustomReference":"","ProductCode":"2016 ATX Standard Processing - Total Tax Office Package","Quantity":1,"UnitPrice":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":108.9,"DecimalValueWithPrecision":"108.90000","Dollars":108,"Negative":false},"SalesAmount":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":108.9,"DecimalValueWithPrecision":"108.90000","Dollars":108,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":108.9,"DecimalValueWithPrecision":"108.90000","Dollars":108,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":53,"CentsWithPrecision":"53.400","DecimalValue":6.53,"DecimalValueWithPrecision":"6.53400","Dollars":6,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":53,"CentsWithPrecision":"53.400","DecimalValue":6.53,"DecimalValueWithPrecision":"6.53400","Dollars":6,"Negative":false}}}},{"LineItemNumber":3,"CustomReference":"","ProductCode":"2016 ATX Business States (All)","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":4,"CustomReference":"","ProductCode":"2016 ATX 1040 Package","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":5,"CustomReference":"","ProductCode":"EFile Fee","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":6,"CustomReference":"","ProductCode":"2016 ATX Standard Processing - 1040 package","Quantity":1,"UnitPrice":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":42.9,"DecimalValueWithPrecision":"42.90000","Dollars":42,"Negative":false},"SalesAmount":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":42.9,"DecimalValueWithPrecision":"42.90000","Dollars":42,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":90,"CentsWithPrecision":"90.000","DecimalValue":42.9,"DecimalValueWithPrecision":"42.90000","Dollars":42,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":57,"CentsWithPrecision":"57.400","DecimalValue":2.57,"DecimalValueWithPrecision":"2.57400","Dollars":2,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":57,"CentsWithPrecision":"57.400","DecimalValue":2.57,"DecimalValueWithPrecision":"2.57400","Dollars":2,"Negative":false}}}},{"LineItemNumber":7,"CustomReference":"","ProductCode":"2016 ATX Federal 1040","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":8,"CustomReference":"","ProductCode":"2016 ATX User Guide PDF","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":9,"CustomReference":"","ProductCode":"2016 ATX 1040 State (1-3 States)","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":10,"CustomReference":"","ProductCode":"2016 2 (Two) Concurrent User Licenses","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":11,"CustomReference":"","ProductCode":"2016 ATX PaperlessPLUS","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":12,"CustomReference":"","ProductCode":"2016 ATX Tax Season Essentials CD","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":13,"CustomReference":"","ProductCode":"2016 ATX 1040 State (All States)","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":14,"CustomReference":"","ProductCode":"2016 ATX Federal Business and Specialty","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":15,"CustomReference":"","ProductCode":"2016 ATX Tax Prep Partner Standard Bundle","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":16,"CustomReference":"","ProductCode":"2016 Unlimited Efiling","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":17,"CustomReference":"","ProductCode":"2016 ATX-Tax Prep Partner 1041","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":18,"CustomReference":"","ProductCode":"2016 Payroll Compliance Reporting","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":19,"CustomReference":"","ProductCode":"2016 US Master Tax Guide Online","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":20,"CustomReference":"","ProductCode":"2016 ATX User Guide PDF","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":21,"CustomReference":"","ProductCode":"2016 US Master Tax Guide Book","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":22,"CustomReference":"","ProductCode":"2016 Complete Tax Library","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":23,"CustomReference":"","ProductCode":"2016 5 (Five) Concurrent User Licenses","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":24,"CustomReference":"","ProductCode":"2016 Practical Tax Bulletin","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}},{"LineItemNumber":25,"CustomReference":"","ProductCode":"2016 Practical Tax Expert","Quantity":1,"UnitPrice":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"SalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"ShipFromAddress":{"Address1":"225 Chastain Meadows Parkway","Address2":"","City":"Kennesaw","Country":"UNITED STATES","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"GA","Zip":"30144-5897"},"ShipToAddress":{"Address1":"Test","Address2":"","City":"annapolis","Country":"US","Jurisdictions":"","Latitude":0,"Longitude":0,"State":"MD","Zip":21401},"TaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":10,"DecimalValueWithPrecision":"10.00000","Dollars":10,"Negative":false},"NonTaxableSalesAmount":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TaxAmount":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false},"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TaxationType":"SELLER_USE","TotalTax":{"Cents":60,"CentsWithPrecision":"60.000","DecimalValue":0.6,"DecimalValueWithPrecision":"0.60000","Dollars":0,"Negative":false}}}}]},"RecalculatedJurisdictions":true,"Taxes":{"InvoiceTax":{"JurisdictionFips":24,"JurisdictionLevel":"STATE","JurisdictionName":"Maryland","EffectiveRate":0.06,"TotalTax":{"Cents":40,"CentsWithPrecision":"40.080","DecimalValue":51.4,"DecimalValueWithPrecision":"51.40080","Dollars":51,"Negative":false}}}}},"TotalExemptSales":{"Cents":0,"CentsWithPrecision":"0.000","DecimalValue":0,"DecimalValueWithPrecision":"0.00000","Dollars":0,"Negative":false},"TotalSales":{"Cents":68,"CentsWithPrecision":"68.000","DecimalValue":856.68,"DecimalValueWithPrecision":"856.68000","Dollars":856,"Negative":false},"TotalTax":{"Cents":40,"CentsWithPrecision":"40.080","DecimalValue":51.4,"DecimalValueWithPrecision":"51.40080","Dollars":51,"Negative":false},"Transactions":{"Dates":"2016-02-26T00:00:00-08:00","InvoiceNumber":"INV-0710","TransactionsID":120501653}}}';

        //HttpResponse httpe = (HttpResponse)s;
       //if(Test.isRunningTest()){
        //return httpe; 
        //}else{
            return auth.send(req);
        //}
        
    }
    
      public static String postInvoic(Id sRecordId){
      
        invoiceit_s__Invoice__c invoice = [SELECT Id,Name FROM invoiceit_s__Invoice__c WHERE Id =: sRecordId];
        System.debug('Post Invoice '+gateway.invoiceit_s__Merchant_ID__c);
        String doDirectRequest = '<?xml version="1.0" standalone="yes"?>'+
         '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tran="http://speedtax.com/transaction" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/03/addressing" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">'+
          '<soap:Header>' +
            '<wsse:Security soap:mustUnderstand="1">' +
             '<wsse:UsernameToken>' +
                '<wsse:Username>'+gateway.invoiceit_s__Merchant_ID__c+'</wsse:Username>' +
                '<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">'+gateway.invoiceit_s__Merchant_Reference__c+'</wsse:Password>' +
              '</wsse:UsernameToken>' +
            '</wsse:Security>' +
          '</soap:Header>' +
          '<soapenv:Body>' +
            '<tran:postInvoices>' +
              '<CompanyId>'+gateway.invoiceit_s__Security_Key__c+'</CompanyId>' +
              '<InvoiceNumbers>'+invoice.Name+'</InvoiceNumbers>' +
            '</tran:postInvoices>' +
          '</soapenv:Body>' +
        '</soapenv:Envelope>' ;
        System.debug('PostInvoice is 176-->'+doDirectRequest);
        return doDirectRequest;
    }
  
  global class wrapperclass{
      global string sresponse;
      global map<string,decimal> map_Pcode_Taxamt ;
     }
}